var D=Object.defineProperty;var T=(e,n,t)=>n in e?D(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var o=(e,n,t)=>(T(e,typeof n!="symbol"?n+"":n,t),t);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();class x{constructor(n,t,s){o(this,"type");o(this,"target");o(this,"data");this.type=n,this.target=t,this.data=s}}class O{constructor(){o(this,"eventHandler_ListenerStorage",{})}on(n,t){let s=this.eventHandler_ListenerStorage[n];return s?s.indexOf(t)==-1?s.push(t):console.warn("Listener already in handler"):this.eventHandler_ListenerStorage[n]=[t],t}once(n,t){return this.on(n,function(s){return t(s),!0}),t}off(n,t){let s=this.eventHandler_ListenerStorage[n];if(s){let i=s.indexOf(t);return i!=-1?s.splice(i,1):console.warn("Listener not in handler"),t}}emit(n,t){let s=this.eventHandler_ListenerStorage[n];if(s&&s.length>0){let i=Object.freeze(new x(n,this,t));s.length>1&&(s=[...s]);for(let r=0,l=s.length;r<l;r++)try{s[r](i)&&(s.splice(r,1),l--,r--)}catch(y){console.warn("Failed while dispatching event",y)}}}clear(n){this.eventHandler_ListenerStorage[n]=[]}inUse(n){var t;return Boolean((t=this.eventHandler_ListenerStorage[n])==null?void 0:t.length)}has(n,t){var s;return Boolean(((s=this.eventHandler_ListenerStorage[n])==null?void 0:s.indexOf(t))!==-1)}amount(n){var t;return((t=this.eventHandler_ListenerStorage[n])==null?void 0:t.length)||0}}var d=(e=>(e[e.Connect=0]="Connect",e[e.Disconnect=1]="Disconnect",e[e.Adopted=2]="Adopted",e))(d||{});class L extends HTMLElement{constructor(){super(...arguments);o(this,"$connectedObserver");o(this,"isVisible",!1);o(this,"events",new O)}static elementName(){return"@abstract@"}static elementNameSpace(){return"chocolatelibui"}connectedCallback(){this.$connectedObserver?this.$connectedObserver.observe(this):(this.events.emit("connect",0),this.isVisible=!0)}disconnectedCallback(){this.$connectedObserver?(this.$connectedObserver.unobserve(this),this.isVisible&&(this.events.emit("connect",1),this.isVisible=!1)):(this.events.emit("connect",1),this.isVisible=!1)}adoptedCallback(){this.events.emit("connect",2)}options(){return this}attachToObserver(t){t?(this.$connectedObserver=t,this.isConnected&&t.observe(this)):this.$connectedObserver&&(this.isConnected&&this.$connectedObserver.unobserve(this),this.isVisible||(this.events.emit("connect",0),this.isVisible=!0),delete this.$connectedObserver)}}const w=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);var E=/^[a-z](?:[\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-(?:[\x2D\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/;let H=e=>e?/[A-Z]/.test(e)?"Custom element names must not contain uppercase ASCII characters.":e.includes("-")?/^\d/i.test(e)?"Custom element names must not start with a digit.":/^-/i.test(e)?"Custom element names must not start with a hyphen.":E.test(e)?w.has(e)?`The supplied element name is reserved and can't be used.
See: https://html.spec.whatwg.org/multipage/scripting.html#valid-custom-element-name`:"Unknown fault":"Invalid element name.":"Custom element names must contain a hyphen. Example: unicorn-cake":"Missing element name.",S=e=>{let n=e.elementNameSpace(),t=e.elementName,s="",i=e;for(;i!==HTMLElement&&n===i.elementNameSpace();){let r=i.elementName();if(i=Object.getPrototypeOf(i),t===i.elementName)throw new Error("Element uses same name as ancestor, abstract classes should return '@abstract@'");if(!r.length)throw new Error("Element doesn't define element name");r!=="@abstract@"&&(s="-"+r+s)}try{customElements.define(n+s,e)}catch{throw H(n+s)}};class k extends IntersectionObserver{constructor(n){super(t=>{for(let s=0;s<t.length;s++)t[s].isIntersecting?t[s].target.isVisible||(t[s].target.events.emit("connect",d.Connect),t[s].target.isVisible=!0):t[s].target.isVisible&&(t[s].target.events.emit("connect",d.Disconnect),t[s].target.isVisible=!1)},n)}}class m extends L{constructor(t){super();o(this,"connects",0);o(this,"disconnects",0);this.style.height="2rem",this.events.on("connect",s=>{switch(s.data){case d.Connect:this.connects++,this.style.backgroundColor="green",console.log("test1");break;case d.Disconnect:this.disconnects++,this.style.backgroundColor="red",console.log("test2");break}this.innerHTML=`Test Element ${t} Connects:${this.connects} Disconnects${this.disconnects}`})}static elementName(){return"testclass"}}S(m);let f=document.body.appendChild(document.createElement("div")),$=f.appendChild(document.createElement("div"));$.innerHTML="Test Connecting";let g=f.appendChild(document.createElement("button"));g.innerHTML="Toggle Connect";g.onclick=()=>{c.children.length===0?b.forEach(e=>{c.appendChild(e)}):c.replaceChildren()};let c=f.appendChild(document.createElement("div"));c.style.display="flex";c.style.flexDirection="column";let b=[];for(let e=0;e<=19;e++){let n=new m(String(e));c.appendChild(n),b[e]=n}let u=document.body.appendChild(document.createElement("div")),N=u.appendChild(document.createElement("div"));N.innerHTML="Test Observer";let v=u.appendChild(document.createElement("button"));v.innerHTML="Toggle Observer";let h=!0;v.onclick=()=>{p.forEach(e=>{e.attachToObserver(h?void 0:C)}),h=!h};let F=u.appendChild(document.createElement("button"));F.innerHTML="Toggle Connect";F.onclick=()=>{a.children.length===0?p.forEach(e=>{a.appendChild(e)}):a.replaceChildren()};let a=u.appendChild(document.createElement("div"));a.style.display="flex";a.style.flexDirection="column";let C=new k({threshold:1}),p=[];for(let e=0;e<=99;e++){let n=new m(String(e));n.attachToObserver(C),a.appendChild(n),p[e]=n}
