var y=Object.defineProperty;var D=(n,s,t)=>s in n?y(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t;var l=(n,s,t)=>(D(n,typeof s!="symbol"?s+"":s,t),t);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))e(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();class L{constructor(s,t,e){l(this,"type");l(this,"target");l(this,"data");this.type=s,this.target=t,this.data=e}}class T{constructor(){l(this,"target");l(this,"eventHandler_ListenerStorage",{})}on(s,t){let e=this.eventHandler_ListenerStorage[s];return e?e.indexOf(t)==-1?e.push(t):console.warn("Listener already in handler"):this.eventHandler_ListenerStorage[s]=[t],t}once(s,t){return this.on(s,function(e){return t(e),!0}),t}off(s,t){let e=this.eventHandler_ListenerStorage[s];if(e){let r=e.indexOf(t);return r!=-1?e.splice(r,1):console.warn("Listener not in handler"),t}}emit(s,t){let e=this.eventHandler_ListenerStorage[s];if(e&&e.length>0){let r=Object.freeze(new L(s,this.target||this,t));e.length>1&&(e=[...e]);for(let i=0,o=e.length;i<o;i++)try{e[i](r)&&(e.splice(i,1),o--,i--)}catch($){console.warn("Failed while dispatching event",$)}}}clear(s){this.eventHandler_ListenerStorage[s]=[]}inUse(s){var t;return Boolean((t=this.eventHandler_ListenerStorage[s])==null?void 0:t.length)}has(s,t){var e;return Boolean(((e=this.eventHandler_ListenerStorage[s])==null?void 0:e.indexOf(t))!==-1)}amount(s){var t;return((t=this.eventHandler_ListenerStorage[s])==null?void 0:t.length)||0}}var u=(n=>(n[n.Connect=0]="Connect",n[n.Disconnect=1]="Disconnect",n[n.Adopted=2]="Adopted",n))(u||{});class x extends HTMLElement{constructor(){super();l(this,"$connectedObserver");l(this,"isVisible",!1);l(this,"events",new T);l(this,"$values");l(this,"$valueFuncs");l(this,"$valueConnector");this.events.target=this}static elementName(){return"@abstract@"}static elementNameSpace(){return"chocolatelibui-core"}connectedCallback(){this.$connectedObserver?this.$connectedObserver.observe(this):(this.events.emit("connect",0),this.isVisible=!0)}disconnectedCallback(){this.$connectedObserver?(this.$connectedObserver.unobserve(this),this.isVisible&&(this.events.emit("connect",1),this.isVisible=!1)):(this.events.emit("connect",1),this.isVisible=!1)}adoptedCallback(){this.events.emit("connect",2)}options(t){return this}attachToObserver(t){t?(this.$connectedObserver=t,this.isConnected&&t.observe(this)):this.$connectedObserver&&(this.isConnected&&this.$connectedObserver.unobserve(this),this.isVisible||(this.events.emit("connect",0),this.isVisible=!0),delete this.$connectedObserver)}attachValue(t,e){if(this.$valueFuncs){if(this.$valueFuncs.includes(e))throw"Function is already attached to this element"}else this.$values=[],this.$valueFuncs=[];return this.$valueConnector?this.isVisible&&t.addListener(e):this.$valueConnector=this.events.on("connect",r=>{switch(r.data){case 0:for(let i=0;i<this.$values.length;i++)this.$values[i].addListener(this.$valueFuncs[i],!0);break;case 1:for(let i=0;i<this.$values.length;i++)this.$values[i].removeListener(this.$valueFuncs[i]);break;case 2:for(let i=0;i<this.$values.length;i++)this.$values[i].removeListener(this.$valueFuncs[i]),this.$values[i].addListener(this.$valueFuncs[i],!0)}}),this.$valueFuncs.push(e),this.$values.push(t),e}dettachValue(t){if(this.$valueFuncs){let e=this.$valueFuncs.indexOf(t);e>-1&&(this.isVisible&&this.$values[e].removeListener(t),this.$values.splice(e,1),this.$valueFuncs.splice(e,1),this.$valueFuncs.length===0&&this.events.off("connect",this.$valueConnector))}}}const w=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);var O=/^[a-z](?:[\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-(?:[\x2D\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/;let E=n=>n?/[A-Z]/.test(n)?"Custom element names must not contain uppercase ASCII characters.":n.includes("-")?/^\d/i.test(n)?"Custom element names must not start with a digit.":/^-/i.test(n)?"Custom element names must not start with a hyphen.":O.test(n)?w.has(n)?`The supplied element name is reserved and can't be used.
See: https://html.spec.whatwg.org/multipage/scripting.html#valid-custom-element-name`:"Unknown fault":"Invalid element name.":"Custom element names must contain a hyphen. Example: unicorn-cake":"Missing element name.",H=n=>{let s=n.elementNameSpace(),t=n.elementName,e="",r=n;for(;r!==HTMLElement&&s===r.elementNameSpace();){let i=r.elementName();if(r=Object.getPrototypeOf(r),t===r.elementName)throw new Error("Element uses same name as ancestor, abstract classes should return '@abstract@'");if(!i.length)throw new Error("Element doesn't define element name");i!=="@abstract@"&&(e="-"+i+e)}e=s+e;try{customElements.define(e,n)}catch(i){throw i.message.includes("has already been used with this registry")?i:new Error(E(e)+" "+e)}};class S extends IntersectionObserver{constructor(s){super(t=>{for(let e=0;e<t.length;e++)t[e].isIntersecting?t[e].target.isVisible||(t[e].target.events.emit("connect",u.Connect),t[e].target.isVisible=!0):t[e].target.isVisible&&(t[e].target.events.emit("connect",u.Disconnect),t[e].target.isVisible=!1)},s)}}class f extends x{constructor(t){super();l(this,"connects",0);l(this,"disconnects",0);this.style.height="2rem",this.events.on("connect",e=>{switch(e.data){case u.Connect:this.connects++,this.style.backgroundColor="green",console.log("test1");break;case u.Disconnect:this.disconnects++,this.style.backgroundColor="red",console.log("test2");break}this.innerHTML=`Test Element ${t} Connects:${this.connects} Disconnects${this.disconnects}`})}static elementName(){return"testclass"}options(t){return this}}H(f);let m=document.body.appendChild(document.createElement("div")),k=m.appendChild(document.createElement("div"));k.innerHTML="Test Connecting";let p=m.appendChild(document.createElement("button"));p.innerHTML="Toggle Connect";p.onclick=()=>{c.children.length===0?g.forEach(n=>{c.appendChild(n)}):c.replaceChildren()};let c=m.appendChild(document.createElement("div"));c.style.display="flex";c.style.flexDirection="column";let g=[];for(let n=0;n<=19;n++){let s=new f(String(n));c.appendChild(s),g[n]=s}let h=document.body.appendChild(document.createElement("div")),N=h.appendChild(document.createElement("div"));N.innerHTML="Test Observer";let b=h.appendChild(document.createElement("button"));b.innerHTML="Toggle Observer";let d=!0;b.onclick=()=>{v.forEach(n=>{n.attachToObserver(d?void 0:C)}),d=!d};let F=h.appendChild(document.createElement("button"));F.innerHTML="Toggle Connect";F.onclick=()=>{a.children.length===0?v.forEach(n=>{a.appendChild(n)}):a.replaceChildren()};let a=h.appendChild(document.createElement("div"));a.style.display="flex";a.style.flexDirection="column";let C=new S({threshold:1}),v=[];for(let n=0;n<=99;n++){let s=new f(String(n));s.attachToObserver(C),a.appendChild(s),v[n]=s}
